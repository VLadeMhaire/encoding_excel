<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VAT Encoding Data Repository</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f5f5;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background-color: #333;
            color: white;
            padding: 1rem 0;
            margin-bottom: 2rem;
        }
        
        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        h1 {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }
        
        .subtitle {
            color: #aaa;
            font-size: 1rem;
        }
        
        .data-section {
            background-color: white;
            margin-bottom: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .section-header {
            background-color: #444;
            color: white;
            padding: 1rem;
            font-size: 1.2rem;
            font-weight: 600;
        }
        
        .section-content {
            padding: 1rem;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th, td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        
        th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: #333;
        }
        
        tr:hover {
            background-color: #f8f9fa;
        }
        
        .no-data {
            text-align: center;
            padding: 2rem;
            color: #666;
            font-style: italic;
        }
        
        .last-updated {
            text-align: center;
            color: #666;
            font-size: 0.9rem;
            margin-top: 2rem;
            padding-top: 1rem;
            border-top: 1px solid #eee;
        }
        
        .refresh-btn {
            background-color: #0066cc;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
        }
        
        .refresh-btn:hover {
            background-color: #0055aa;
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <div>
                <h1>VAT Encoding Data Repository</h1>
                <p class="subtitle">Automatically synced data from PHP Desktop Encoder</p>
            </div>
            <button class="refresh-btn" onclick="loadData()">Refresh Data</button>
        </div>
    </header>
    
    <div class="container">
        <div class="data-section">
            <div class="section-header">Vatable Sales</div>
            <div class="section-content" id="vatable-sales">
                <div class="no-data">Loading data...</div>
            </div>
        </div>
        
        <div class="data-section">
            <div class="section-header">Non-VAT Sales</div>
            <div class="section-content" id="non-vat-sales">
                <div class="no-data">Loading data...</div>
            </div>
        </div>
        
        <div class="data-section">
            <div class="section-header">Vatable Purchases</div>
            <div class="section-content" id="vatable-purchases">
                <div class="no-data">Loading data...</div>
            </div>
        </div>
        
        <div class="data-section">
            <div class="section-header">Non-VAT Purchases</div>
            <div class="section-content" id="non-vat-purchases">
                <div class="no-data">Loading data...</div>
            </div>
        </div>
        
        <div class="data-section">
            <div class="section-header">Vatable Expenses</div>
            <div class="section-content" id="vatable-expenses">
                <div class="no-data">Loading data...</div>
            </div>
        </div>
        
        <div class="data-section">
            <div class="section-header">Non-VAT Expenses</div>
            <div class="section-content" id="non-vat-expenses">
                <div class="no-data">Loading data...</div>
            </div>
        </div>
        
        <div class="data-section">
            <div class="section-header">Capex</div>
            <div class="section-content" id="capex">
                <div class="no-data">Loading data...</div>
            </div>
        </div>
        
        <div class="data-section">
            <div class="section-header">Taxes & Licenses</div>
            <div class="section-content" id="taxes-licenses">
                <div class="no-data">Loading data...</div>
            </div>
        </div>
        
        <div class="data-section">
            <div class="section-header">Purchase Returns</div>
            <div class="section-content" id="purchase-returns">
                <div class="no-data">Loading data...</div>
            </div>
        </div>
        
        <div class="last-updated" id="last-updated">
            Last updated: Loading...
        </div>
    </div>
    
    <script>
    // Mock data - In production, this would load from a real API
    const mockData = {
        "vatable_sales": [
            {
                "date": "2024-01-15",
                "invoice_number": "INV-001",
                "particulars": "ABC Corporation",
                "tin_number": "123-456-789-000",
                "gross_sales": 11200.00,
                "net_sales": 10000.00,
                "output_tax": 1200.00,
                "withholding_tax_rate": 1,
                "withholding_amount": 100.00
            }
        ],
        "non_vat_sales": [
            {
                "date": "2024-01-16",
                "invoice_number": "INV-002",
                "particulars": "XYZ Enterprises",
                "tin_number": "987-654-321-000",
                "gross_sales": 5000.00,
                "withholding_tax_rate": 2,
                "withholding_amount": 100.00
            }
        ],
        "vatable_purchases": [],
        "non_vat_purchases": [],
        "vatable_expenses": [],
        "non_vat_expenses": [],
        "capex": [],
        "taxes_licenses": [],
        "purchase_returns": []
    };
    
    function formatCurrency(amount) {
        return 'â‚±' + amount.toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,');
    }
    
    function formatDate(dateString) {
        const date = new Date(dateString);
        return date.toLocaleDateString('en-US', {
            year: 'numeric',
            month: 'short',
            day: 'numeric'
        });
    }
    
    function formatTIN(tin) {
        if (tin && tin.length === 12) {
            return tin.substring(0, 3) + '-' + tin.substring(3, 6) + '-' +
                   tin.substring(6, 9) + '-' + tin.substring(9, 12);
        }
        return tin || 'N/A';
    }
    
    function renderTable(data, containerId) {
        const container = document.getElementById(containerId);
        
        if (!data || data.length === 0) {
            container.innerHTML = '<div class="no-data">No data available</div>';
            return;
        }
        
        const headers = Object.keys(data[0]);
        let html = '<table>';
        
        // Table header
        html += '<thead><tr>';
        headers.forEach(header => {
            const displayName = header.replace(/_/g, ' ').toUpperCase();
            html += `<th>${displayName}</th>`;
        });
        html += '</tr></thead>';
        
        // Table body
        html += '<tbody>';
        data.forEach(item => {
            html += '<tr>';
            headers.forEach(header => {
                let value = item[header];
                
                // Format based on header
                if (header.includes('date')) {
                    value = formatDate(value);
                } else if (header.includes('tin')) {
                    value = formatTIN(value);
                } else if (typeof value === 'number' && 
                          (header.includes('amount') || header.includes('sales') || 
                           header.includes('purchases') || header.includes('expenses') || 
                           header.includes('tax'))) {
                    value = formatCurrency(value);
                } else if (header.includes('rate') && typeof value === 'number') {
                    value = value + '%';
                }
                
                html += `<td>${value || 'N/A'}</td>`;
            });
            html += '</tr>';
        });
        html += '</tbody></table>';
        
        container.innerHTML = html;
    }
    
    function loadData() {
        // In a real implementation, this would fetch from an API
        // For now, we'll use mock data
        const data = mockData;
        
        // Render each section
        renderTable(data.vatable_sales, 'vatable-sales');
        renderTable(data.non_vat_sales, 'non-vat-sales');
        renderTable(data.vatable_purchases, 'vatable-purchases');
        renderTable(data.non_vat_purchases, 'non-vat-purchases');
        renderTable(data.vatable_expenses, 'vatable-expenses');
        renderTable(data.non_vat_expenses, 'non-vat-expenses');
        renderTable(data.capex, 'capex');
        renderTable(data.taxes_licenses, 'taxes-licenses');
        renderTable(data.purchase_returns, 'purchase-returns');
        
        // Update last updated timestamp
        document.getElementById('last-updated').textContent = 
            'Last updated: ' + new Date().toLocaleString();
    }
    
    // Load data on page load
    document.addEventListener('DOMContentLoaded', loadData);
    
    // Auto-refresh every 5 minutes
    setInterval(loadData, 300000);
    </script>
</body>
</html>
